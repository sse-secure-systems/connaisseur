{
  "type": "object",
  "properties": {
    "cluster_identifier": {
      "type": "string"
    },
    "admit_request": {
      "type": "object",
      "properties": {
        "templates": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "template": {
                "type": "string"
              },
              "receiver_url": {
                "type": "string"
              },
              "receiver_authentication_type": {
                "type": "string",
                "enum": [
                  "none",
                  "basic",
                  "bearer"
                ]
              },
              "receiver_authentication_basic": {
                "type": "object",
                "properties": {
                  "username_env": {
                    "type": "string"
                  },
                  "password_env": {
                    "type": "string"
                  },
                  "authentication_scheme": {
                    "type": "string"
                  }
                },
                "required": [
                  "username_env",
                  "password_env"
                ]
              },
              "receiver_authentication_bearer": {
                "type": "object",
                "oneOf": [
                  {"required": ["token_file"]},
                  {"required": ["token_env"]}
                ],
                "properties": {
                  "authentication_scheme": {
                    "type": "string"
                  },
                  "token_file": {
                    "type": "string"
                  },
                  "token_env": {
                    "type": "string"
                  }
                }
              },
              "priority": {
                "type": "integer"
              },
              "custom_headers": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "minItems": 1
              },
              "payload_fields": {
                "type": "object"
              },
              "fail_if_alert_sending_fails": {
                "type": "boolean"
              }
            },
            "anyOf": [
              {
                "properties": {
                  "receiver_authentication_type": {
                    "const": "basic"
                  }
                },
                "required": [
                  "receiver_authentication_basic"
                ]
              },
              {
                "properties": {
                  "receiver_authentication_type": {
                    "const": "bearer"
                  }
                },
                "required": [
                  "receiver_authentication_bearer"
                ]
              },
              {
                "properties": {
                  "receiver_authentication_type": {
                    "const": "none"
                  }
                }
              }
            ],
            "required": [
              "template",
              "receiver_url"
            ]
          }
        }
      },
      "required": [
        "templates"
      ]
    },
    "reject_request": {
      "type": "object",
      "properties": {
        "templates": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "template": {
                "type": "string"
              },
              "receiver_url": {
                "type": "string"
              },
              "receiver_authentication_type": {
                "type": "string",
                "enum": [
                  "none",
                  "basic",
                  "bearer"
                ]
              },
              "receiver_authentication_basic": {
                "type": "object",
                "properties": {
                  "username_env": {
                    "type": "string"
                  },
                  "password_env": {
                    "type": "string"
                  },
                  "authentication_scheme": {
                    "type": "string"
                  }
                },
                "required": [
                  "username_env",
                  "password_env"
                ]
              },
              "receiver_authentication_bearer": {
                "type": "object",
                "oneOf": [
                  {"required": ["token_file"]},
                  {"required": ["token_env"]}
                ],
                "properties": {
                  "authentication_scheme": {
                    "type": "string"
                  },
                  "token_file": {
                    "type": "string"
                  },
                  "token_env": {
                    "type": "string"
                  }
                }
              },
              "priority": {
                "type": "integer"
              },
              "custom_headers": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "minItems": 1
              },
              "payload_fields": {
                "type": "object"
              },
              "fail_if_alert_sending_fails": {
                "type": "boolean"
              }
            },
            "anyOf": [
              {
                "properties": {
                  "receiver_authentication_type": {
                    "const": "basic"
                  }
                },
                "required": [
                  "receiver_authentication_basic"
                ]
              },
              {
                "properties": {
                  "receiver_authentication_type": {
                    "const": "bearer"
                  }
                },
                "required": [
                  "receiver_authentication_bearer"
                ]
              },
              {
                "properties": {
                  "receiver_authentication_type": {
                    "const": "none"
                  }
                }
              }
            ],
            "required": [
              "template",
              "receiver_url"
            ]
          }
        }
      },
      "required": [
        "templates"
      ]
    }
  }
}
